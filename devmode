#!/bin/bash
set -e

# Backend
echo "Starting backend..."
cd backend || exit 1
source .venv/bin/activate
export APP_ENV=development
python app.py &
BACKEND_PID=$!
echo "Backend started with PID $BACKEND_PID"

# Cleanup on exit
cleanup() {
    echo "Stopping servers..."
    kill $FRONTEND_PID $BACKEND_PID 2>/dev/null || true
    echo "Servers stopped."
}
trap cleanup EXIT

wait $FRONTEND_PID
